<!DOCTYPE html>
<html>
<head>
  <title>ScrumDiddlyUmptious</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
  <meta name="viewport" content="width=device-width, initial-scale:1.0">
</head>
<body>

<ul class="nav nav-tabs">

  <li><%= link_to "Recipes", recipes_path %></li>

  <% if user_signed_in? %>
      <% if current_user.role == 'admin' %>
        <li><%= link_to "Users", users_path %></li>
      <% end %>
  <% end %>

  <%# if user signed in, use username as trigger for dropdown %>
  <% if user_signed_in? %>
    <li class="dropdown">
      <a class="dropdown-toggle loggedInUser" data-toggle="dropdown" href="#">
        Logged in as <strong><%= current_user.username %></strong><span class="caret"></span>
      </a>

      <ul class="dropdown-menu">
        <li class="loggedInUser">Logged in as <strong><%= current_user.username %></strong>.</li>
        <li><%= link_to 'Edit Profile', edit_user_registration_path, :class => 'navbar-link' %></li>
        <li><%= link_to 'Edit Preferences', edit_user_preference_path(current_user.id, :id), :class => 'navbar-link' %></li>
        <li><%= link_to "Logout", destroy_user_session_path, method: :delete, :class => 'navbar-link', data: {no_turbolink: true}  %></li>
      </ul>
    </li>

  <%# else, use Login to toggle %>
  <% else %>
    <li class="dropdown">
      <a class="dropdown-toggle" data-toggle="dropdown" href="#">
        Login <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li><%= link_to "Login", new_user_session_path, :class => 'navbar-link'  %></li>
        <li><%= link_to "Sign up", new_user_registration_path, :class => 'navbar-link'  %></li>
      </ul>
  <% end %>
   
</ul>
<div id="main">
  <div class="breadcrumbs">
    <%= render_breadcrumbs('>') %>
  </div>

  <% if notice %>
    <p class="alert alert-success"><%= notice %></p>
  <% end %>
  <% if alert %>
    <p class="alert alert-danger"><%= alert %></p>
  <% end %>

  <div class="container-fluid">
    <%= yield %>
  </div>
</div>

<div class="footer">
  &copy; ScrumDiddlyUmptious 2014
</div>

</body>
</html>
